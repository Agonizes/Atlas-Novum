# Display Vassal Stats
# Originally written for VeF
# Rewritten for Imperialism Reinvigorated by Amyzonis

country_decisions = {

	display_vassal_integration_progress = {
		major = yes

		potential = {
			ai = no
			any_country = { is_subject_of = ROOT is_lesser_in_union = no }
		}

		allow = {
			custom_trigger_tooltip = {
				always = no
				tooltip = display_vassal_integration_effects
			}
		}

		effect = {
			custom_tooltip = vassal_expansion_tooltip
			if = {
				limit = {
					is_emperor = yes
					hre_reform_level = 7
				}
				custom_tooltip = display_hre_vassal_privilegia
			}
			every_subject_country = {
				limit = {
					is_lesser_in_union = no
					NOT = { has_country_flag = long_term_vassal }
					NOT = { has_country_flag = allowed_to_annex	 }
					NOT = { is_subject_of_type = colony }
					NOT = { is_subject_of_type = daimyo_vassal }
					NOT = { is_subject_of_type = tributary_state }
					NOT = { is_subject_of_type = march }
					NOT = { is_subject_of_type = client_vassal }
					NOT = { is_subject_of_type = client_march }
					NOT = { is_subject_of_type = league }
					NOT = { is_subject_of_type = canton }
					is_nomad = no
					OR = {
						ROOT = { is_emperor = no }
						NOT = { hre_reform_level = 7 }
						NOT = { is_part_of_hre = yes }
					}
					OR = {
						is_subject_of_type = suzerainty 
						is_subject_of_type = fief 
						is_subject_of_type = dominion 
					}
				}
				if = {
					limit = { NOT = { has_country_flag = vassal_flag }}
					custom_tooltip = war_vassal_hold_start
					else = {
						if = {
							limit = { check_variable = { which = vassal_progress value = 100 } any_known_country = { war_with = PREV }}
							trigger_switch = {
								on_trigger = is_subject_of_type
								suzerainty = { custom_tooltip = war_vassal_hold_suz }
								fief = { custom_tooltip = war_vassal_hold_fief }
								dominion = { custom_tooltip = war_vassal_hold_dom }
							#	vassal = { custom_tooltip = war_vassal_hold_vas }
							}
							else = {
								trigger_switch = {
									on_trigger = is_subject_of_type
									suzerainty = { custom_tooltip = display_vassal_progress_suz }
									fief = { custom_tooltip = display_vassal_progress_fief }
									dominion = { custom_tooltip = display_vassal_progress_dom }
						#			vassal = { custom_tooltip = display_vassal_progress_vas }
								}
							}
						}
					}
				}
			}
			every_subject_country = {
				limit = { has_country_flag = long_term_vassal }
				custom_tooltip = display_long_term_vassal
				if = {
					limit = {
						overlord = {
							OR = {
								AND = {
									has_idea = integrated_elites
									NOT = { has_idea = flexible_negotiation }
									NOT = { has_idea = indirect_rule }
								}
								AND = {
									has_idea = flexible_negotiation
									NOT = { has_idea = integrated_elites }
									NOT = { has_idea = indirect_rule }
								}
								AND = {
									has_idea = indirect_rule
									NOT = { has_idea = integrated_elites }
									NOT = { has_idea = flexible_negotiation }
								}
							}
						}
					}
					custom_tooltip = display_long_term_vassal_dip1
				}
				if = {
					limit = {
						overlord = {
							OR = {
								AND = {
								has_idea = integrated_elites
									has_idea = flexible_negotiation
									NOT = { has_idea = indirect_rule }
								}
								AND = {
									has_idea = integrated_elites
									has_idea = indirect_rule
									NOT = { has_idea = flexible_negotiation }
								}
								AND = {
									has_idea = flexible_negotiation
									has_idea = indirect_rule
									NOT = { has_idea = integrated_elites }
								}
							}
						}
					}
					custom_tooltip = display_long_term_vassal_dip2
				}
				if = {
					limit = {
						overlord = {
							has_idea = integrated_elites
							has_idea = flexible_negotiation
							has_idea = indirect_rule
						}
					}
					custom_tooltip = display_long_term_vassal_dip3
				}
			}
			every_subject_country = {
				limit = { is_nomad = yes }
				custom_tooltip = display_nomad_vassal
			}
		}

		ai_will_do = { factor = 0 }
	}
	display_own_integration_progress = {
		major = yes

		potential = {
			ai = no
			is_subject = yes
			
			is_lesser_in_union = no
			NOT = { has_country_flag = long_term_vassal }
			NOT = { has_country_flag = allowed_to_annex	 }
			NOT = { is_subject_of_type = colony }
			NOT = { is_subject_of_type = daimyo_vassal }
			NOT = { is_subject_of_type = tributary_state }
			NOT = { is_subject_of_type = march }		
			NOT = { is_subject_of_type = client_vassal }
			NOT = { is_subject_of_type = client_march }
			NOT = { is_subject_of_type = league }
			NOT = { is_subject_of_type = canton }
			is_nomad = no
			OR = {
				ROOT = { is_emperor = no }
				NOT = { hre_reform_level = 7 }
				NOT = { is_part_of_hre = yes }
			}
			OR = {
				is_subject_of_type = suzerainty 
				is_subject_of_type = fief 
				is_subject_of_type = dominion 
			}
		}

		allow = {
			custom_trigger_tooltip = {
				always = no
				tooltip = display_vassal_integration_effects
			}			
		}
		
		effect = {
			trigger_switch = {
				on_trigger = is_subject_of_type
				suzerainty = { custom_tooltip = tooltip_own_suz }
				fief = { custom_tooltip = tooltip_own_fief }
				dominion = { custom_tooltip = tooltip_own_dom }
			#	vassal = { custom_tooltip = tooltip_own_vas }
			}
		}
	}
}
