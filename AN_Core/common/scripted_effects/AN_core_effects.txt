# CLIMATE
IR_check_climate = {
	hidden_effect = {
		set_variable = { which = IR_prov_climate value = 0 }
		if = {
			limit = { has_global_flag = IR_global_climate_A }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_xeric = { set_variable = { which = IR_prov_pop_cap value = 3 } } 
				climate_veldt = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_montane = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_polar = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				#
				climate_outback = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_levante = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_chaco = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_pratumic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_boreal = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				#
				climate_chaparral = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_mediterranean = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_temperate = { set_variable = { which = IR_prov_pop_cap value = 9 } }
				climate_continental = { set_variable = { which = IR_prov_pop_cap value = 8 } }
				climate_hemiboreal = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				#
				climate_cerradic = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_calidic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_mesothermal = { set_variable = { which = IR_prov_pop_cap value = 8 } }
				climate_nemoral = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_oceanic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				#
				climate_tropical = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_pantanal = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_subtropical = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_cascadic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_maritime = { set_variable = { which = IR_prov_pop_cap value = 5 } }
			}
		}
		else_if = {
			limit = { has_global_flag = IR_global_climate_0 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_xeric = { set_variable = { which = IR_prov_pop_cap value = 4 } } 
				climate_veldt = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_montane = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_polar = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				#
				climate_outback = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_levante = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_chaco = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_pratumic = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_boreal = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				#
				climate_chaparral = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_mediterranean = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_temperate = { set_variable = { which = IR_prov_pop_cap value = 8 } }
				climate_continental = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_hemiboreal = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				#
				climate_cerradic = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_calidic = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_mesothermal = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_nemoral = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_oceanic = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				#
				climate_tropical = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_pantanal = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_subtropical = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_cascadic = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_maritime = { set_variable = { which = IR_prov_pop_cap value = 3 } }
			}
		}
		else_if = {
			limit = { has_global_flag = IR_global_climate_1 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_xeric = { set_variable = { which = IR_prov_pop_cap value = 5 } } 
				climate_veldt = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_montane = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_polar = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				#
				climate_outback = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_levante = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_chaco = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_pratumic = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_boreal = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				#
				climate_chaparral = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_mediterranean = { set_variable = { which = IR_prov_pop_cap value = 8 } }
				climate_temperate = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_continental = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_hemiboreal = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				#
				climate_cerradic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_calidic = { set_variable = { which = IR_prov_pop_cap value = 9 } }
				climate_mesothermal = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_nemoral = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_oceanic = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				#
				climate_tropical = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_pantanal = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_subtropical = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_cascadic = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_maritime = { set_variable = { which = IR_prov_pop_cap value = 2 } }
			}
		}
		else_if = {
			limit = { has_global_flag = IR_global_climate_2 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_xeric = { set_variable = { which = IR_prov_pop_cap value = 4 } } 
				climate_veldt = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_montane = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_polar = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_outback = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_levante = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_chaco = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_pratumic = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_boreal = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_chaparral = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_mediterranean = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_temperate = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_continental = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_hemiboreal = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				#
				climate_cerradic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_calidic = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_mesothermal = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_nemoral = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_oceanic = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				#
				climate_tropical = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_pantanal = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_subtropical = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_cascadic = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_maritime = { set_variable = { which = IR_prov_pop_cap value = 1 } }
			}
		}
		else_if = {
			limit = { has_global_flag = IR_global_climate_3 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_xeric = { set_variable = { which = IR_prov_pop_cap value = 3 } } 
				climate_veldt = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_montane = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				climate_polar = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_outback = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_levante = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_chaco = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_pratumic = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				climate_boreal = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_chaparral = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_mediterranean = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_temperate = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_continental = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_hemiboreal = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_cerradic = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_calidic = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_mesothermal = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_nemoral = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_oceanic = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_tropical = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_pantanal = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_subtropical = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_cascadic = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_maritime = { set_variable = { which = IR_prov_pop_cap value = 0 } }
			}
		}
		else_if = {
			limit = { has_global_flag = IR_global_climate_4 }
			trigger_switch = {
				on_trigger = has_province_modifier
				climate_sicco = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_xeric = { set_variable = { which = IR_prov_pop_cap value = 2 } } 
				climate_veldt = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_montane = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				climate_polar = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_outback = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_levante = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_chaco = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_pratumic = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				climate_boreal = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_chaparral = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_mediterranean = { set_variable = { which = IR_prov_pop_cap value = 4 } }
				climate_temperate = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_continental = { set_variable = { which = IR_prov_pop_cap value = 1 } }
				climate_hemiboreal = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_cerradic = { set_variable = { which = IR_prov_pop_cap value = 7 } }
				climate_calidic = { set_variable = { which = IR_prov_pop_cap value = 5 } }
				climate_mesothermal = { set_variable = { which = IR_prov_pop_cap value = 3 } }
				climate_nemoral = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				climate_oceanic = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				#
				climate_tropical = { set_variable = { which = IR_prov_pop_cap value = 8 } }
				climate_pantanal = { set_variable = { which = IR_prov_pop_cap value = 6 } }
				climate_subtropical = { set_variable = { which = IR_prov_pop_cap value = 2 } }
				climate_cascadic = { set_variable = { which = IR_prov_pop_cap value = 0 } }
				climate_maritime = { set_variable = { which = IR_prov_pop_cap value = 0 } }
			}
		}
		#for dynamic localization purposes
		change_variable = {
			which = IR_prov_climate
			which = IR_prov_pop_cap
		}
	}
}


# DEVELOPMENT
IR_check_dev_variables = {
	hidden_effect = {
		set_variable = { which = IR_wealth_production value = 0 }
		set_variable = { which = IR_wealth_growth value = 0 }
		set_variable = { which = IR_pop_production value = 0 }
		set_variable = { which = IR_pop_growth value = 0 }
		set_variable = { which = IR_logistics value = 0 }
		set_variable = { which = IR_consumption value = 0 }
		set_variable = { which = IR_prov_pop value = 0 }
		set_variable = { which = IR_prov_infrastructure value = 0 }
		set_variable = { which = IR_prov_infrastructure_cap value = 0 }
		set_variable = { which = IR_InfrPrjCC value = 0 }
		set_variable = { which = IR_InfrPrjIL value = 0 }
		

		#EXPORT DEV FOR CHECKS
		export_to_variable = {
			variable_name = IR_logistics
			value = modifier:local_development_cost
		}
		export_to_variable = {
			variable_name = IR_prov_infrastructure
			value = trigger_value:base_production
		}
		export_to_variable = {
			variable_name = IR_prov_pop
			value = trigger_value:base_manpower
		}
		###
		if = { #-99.9% is the max negative consumption cost
			limit = {
				NOT = { check_variable = { which = IR_logistics value = 0.001 } }
			}
			set_variable = { which = IR_logistics value = 0.001 }
		}
		change_variable = {
			which = IR_consumption
			which = IR_logistics
		}
		multiply_variable = {
			which = IR_consumption
			which = IR_prov_pop
		}
		###
		IR_check_climate = yes
		###
		
		change_variable = {
			which = IR_pop_production
			which = IR_prov_infrastructure
		}
		#############
		# TRIGGER SWITCH FOR Terrain contribution to Carrying Capacity & Growth
		trigger_switch = {
			on_trigger = has_terrain
			farmlands = { 
				change_variable = { which = IR_wealth_production value = 12 } 
				change_variable = { which = IR_pop_production value = 12 } 
				change_variable = { which = IR_prov_pop_cap value = 8 }
				change_variable = { which = IR_prov_infrastructure_cap value = 8 }
			}
			grasslands = { 
				change_variable = { which = IR_wealth_production value = 10 } 
				change_variable = { which = IR_pop_production value = 10 } 
				change_variable = { which = IR_prov_pop_cap value = 6 }
				change_variable = { which = IR_prov_infrastructure_cap value = 6 }
			}
			drylands = { 
				change_variable = { which = IR_wealth_production value = 9 } 
				change_variable = { which = IR_pop_production value = 9 } 
				change_variable = { which = IR_prov_pop_cap value = 6 }
				change_variable = { which = IR_prov_infrastructure_cap value = 6 }
			}
			#
			woods = { 
				change_variable = { which = IR_wealth_production value = 8 } 
				change_variable = { which = IR_pop_production value = 8 } 
				change_variable = { which = IR_prov_pop_cap value = 5 }
				change_variable = { which = IR_prov_infrastructure_cap value = 5 }
			}
			marsh = { 
				change_variable = { which = IR_wealth_production value = 8 } 
				change_variable = { which = IR_pop_production value = 6 } 
				change_variable = { which = IR_prov_pop_cap value = 5 }
				change_variable = { which = IR_prov_infrastructure_cap value = 5 }
			}
			hills = { 
				change_variable = { which = IR_wealth_production value = 5 } 
				change_variable = { which = IR_pop_production value = 5 } 
				change_variable = { which = IR_prov_pop_cap value = 5 }
				change_variable = { which = IR_prov_infrastructure_cap value = 4 }
			}
			#
			jungle = { 
				change_variable = { which = IR_wealth_production value = 5 } 
				change_variable = { which = IR_pop_production value = 6 } 
				change_variable = { which = IR_prov_pop_cap value = 4 } 
				change_variable = { which = IR_prov_infrastructure_cap value = 4 }
			}
			coastline = { 
				change_variable = { which = IR_wealth_production value = 6 } 
				change_variable = { which = IR_pop_production value = 5 } 
				change_variable = { which = IR_prov_pop_cap value = 4 }
				change_variable = { which = IR_prov_infrastructure_cap value = 5 }
			}
			steppe = { 
				change_variable = { which = IR_wealth_production value = 4 } 
				change_variable = { which = IR_pop_production value = 5 } 
				change_variable = { which = IR_prov_pop_cap value = 4 }
				change_variable = { which = IR_prov_infrastructure_cap value = 4 }
			}
			#
			highlands = { 
				change_variable = { which = IR_wealth_production value = 3 } 
				change_variable = { which = IR_pop_production value = 4 } 
				change_variable = { which = IR_prov_pop_cap value = 4 }
				change_variable = { which = IR_prov_infrastructure_cap value = 3 }
			}
			savannah = { 
				change_variable = { which = IR_wealth_production value = 3 } 
				change_variable = { which = IR_pop_production value = 4 } 
				change_variable = { which = IR_prov_pop_cap value = 4 }
				change_variable = { which = IR_prov_infrastructure_cap value = 4 }
			}
			coastal_desert = { 
				change_variable = { which = IR_wealth_production value = 4 } 
				change_variable = { which = IR_pop_production value = 3 } 
				change_variable = { which = IR_prov_pop_cap value = 2 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			}
			#
			forest = { 
				change_variable = { which = IR_wealth_production value = 3 } 
				change_variable = { which = IR_pop_production value = 3 } 
				change_variable = { which = IR_prov_pop_cap value = 3 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			}
			mountain = { 
				change_variable = { which = IR_wealth_production value = 3 } 
				change_variable = { which = IR_pop_production value = 2 } 
				change_variable = { which = IR_prov_pop_cap value = 3 } 
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			}
			badlands = { 
				change_variable = { which = IR_wealth_production value = 2 } 
				change_variable = { which = IR_pop_production value = 2 } 
				change_variable = { which = IR_prov_pop_cap value = 2 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			}
			#
			tundra = { 
				change_variable = { which = IR_wealth_production value = 2 } 
				change_variable = { which = IR_pop_production value = 1 } 
				change_variable = { which = IR_prov_pop_cap value = 1 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			}
			desert = { 
				change_variable = { which = IR_wealth_production value = 3 } 
				change_variable = { which = IR_pop_production value = 2 } 
				change_variable = { which = IR_prov_pop_cap value = 1 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			}
			glacier = { 
				change_variable = { which = IR_wealth_production value = 1 } 
				change_variable = { which = IR_pop_production value = 1 } 
				change_variable = { which = IR_prov_pop_cap value = 1 }
				change_variable = { which = IR_prov_infrastructure_cap value = 1 }
			}
		}
		#Buildings
		#Urban
		trigger_switch = { 
			on_trigger = has_building
			village = { 
				change_variable = { which = IR_prov_infrastructure_cap  value = 4 }
				change_variable = { which = IR_prov_pop_cap  value = 4 }
			}
			town = { 
				change_variable = { which = IR_prov_infrastructure_cap  value = 8 }
				change_variable = { which = IR_prov_pop_cap  value = 8 }
			}
			city = {
				change_variable = { which = IR_prov_infrastructure_cap  value = 12 }
				change_variable = { which = IR_prov_pop_cap  value = 12 }
			} 
			metropolis = { 
				change_variable = { which = IR_prov_infrastructure_cap  value = 16 }
				change_variable = { which = IR_prov_pop_cap  value = 16 }
			}
		}
		## terrain features
		trigger_switch = { #for ones that will never cross over - slightly reduces calc
			on_trigger = has_province_modifier
		#if = { limit = { has_province_modifier = atoll }
			atoll = {
				change_variable = { which = IR_pop_production value = 2 } 
				change_variable = { which = IR_prov_pop_cap value = 2 }
				subtract_variable = { which = IR_prov_infrastructure_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 2 }
				subtract_variable = { which = IR_InfrPrjIL value = 2 }
			}
		#if = { limit = { has_province_modifier = barrier_islands }
			barrier_islands = {
				change_variable = { which = IR_prov_pop_cap value = 2 }
				change_variable = { which = IR_prov_infrastructure_cap value = 1 }
				change_variable = { which = IR_InfrPrjCC value = 2 }
				change_variable = { which = IR_InfrPrjIL value = 1 }
			}
		#if = { limit = { has_province_modifier = cliff }
			cliff = {
				subtract_variable = { which = IR_prov_pop_cap value = 1 }
				subtract_variable = { which = IR_prov_infrastructure_cap value = 1 }
				subtract_variable = { which = IR_InfrPrjCC value = 1 }
				subtract_variable = { which = IR_InfrPrjIL value = 1 }
			}
		#if = { limit = { has_province_modifier = canyon }
			canyon = {
				change_variable = { which = IR_pop_production value = 1 } 
				change_variable = { which = IR_prov_pop_cap value = 1 }
				subtract_variable = { which = IR_prov_infrastructure_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 1 }
				subtract_variable = { which = IR_InfrPrjIL value = 2 }
			}
		#if = { limit = { has_province_modifier = cove }
			cove = {
				change_variable = { which = IR_prov_pop_cap value = 1 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 1 }
				change_variable = { which = IR_InfrPrjIL value = 2 }
			}
		#if = { limit = { has_province_modifier = valley }
			valley = {
				change_variable = { which = IR_pop_production value = 3 } 
				change_variable = { which = IR_prov_pop_cap value = 1 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 1 }
				change_variable = { which = IR_InfrPrjIL value = 2 }
			}
		#if = { limit = { has_province_modifier = fjord }
			fjord = {
				change_variable = { which = IR_pop_production value = 1 } 
				change_variable = { which = IR_prov_pop_cap value = 2 }
				subtract_variable = { which = IR_prov_infrastructure_cap value = 1 }
				change_variable = { which = IR_InfrPrjCC value = 2 }
				subtract_variable = { which = IR_InfrPrjIL value = 1 }
			}
		#if = { limit = { has_province_modifier = plateau }
			plateau = {
				change_variable = { which = IR_prov_pop_cap value = 1 }
				subtract_variable = { which = IR_prov_infrastructure_cap value = 1 }
				change_variable = { which = IR_InfrPrjCC value = 1 }
				subtract_variable = { which = IR_InfrPrjIL value = 1 }
			}
		#if = { limit = { has_province_modifier = wadi }
			wadi = {
				change_variable = { which = IR_pop_production value = 1 } 
				change_variable = { which = IR_prov_pop_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 2 }
			}
		#if = { limit = { has_province_modifier = oasis }
			oasis = {
				change_variable = { which = IR_pop_production value = 2 } 
				change_variable = { which = IR_prov_pop_cap value = 2 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 2 }
				change_variable = { which = IR_InfrPrjIL value = 2 }
			}
		#if = { limit = { has_province_modifier = volcano }
			volcano = {
				change_variable = { which = IR_prov_pop_cap value = 3 }
				subtract_variable = { which = IR_prov_infrastructure_cap value = 1 }
				change_variable = { which = IR_InfrPrjCC value = 3 }
				subtract_variable = { which = IR_InfrPrjIL value = 1 }
			}
		#if = { limit = { has_province_modifier = doab }
			doab = {
				change_variable = { which = IR_pop_production value = 3 } 
				change_variable = { which = IR_prov_pop_cap value = 3 }
				change_variable = { which = IR_prov_infrastructure_cap value = 2 }
				change_variable = { which = IR_InfrPrjCC value = 3 }
				change_variable = { which = IR_InfrPrjIL value = 2 }
			}
		}
		if = {
			limit = { has_province_modifier = marsh_feature }
			subtract_variable = { which = IR_pop_production value = 2 } 
			subtract_variable = { which = IR_prov_pop_cap value = 1 }
			subtract_variable = { which = IR_prov_infrastructure_cap value = 2 }
			subtract_variable = { which = IR_InfrPrjCC value = 1 }
			subtract_variable = { which = IR_InfrPrjIL value = 2 }
		}
		if = {
			limit = { has_province_modifier = swamp }
			subtract_variable = { which = IR_pop_production value = 2 } 
			subtract_variable = { which = IR_prov_pop_cap value = 2 }
			subtract_variable = { which = IR_prov_infrastructure_cap value = 2 }
			subtract_variable = { which = IR_InfrPrjCC value = 2 }
			subtract_variable = { which = IR_InfrPrjIL value = 2 }
		}
		if = {
			limit = { has_province_modifier = bog }
			subtract_variable = { which = IR_pop_production value = 2 } 
			subtract_variable = { which = IR_prov_pop_cap value = 1 }
			subtract_variable = { which = IR_prov_infrastructure_cap value = 3 }
			subtract_variable = { which = IR_InfrPrjCC value = 1 }
			subtract_variable = { which = IR_InfrPrjIL value = 3 }
		}
		if = {
			limit = { has_province_modifier = bayou }
			subtract_variable = { which = IR_prov_pop_cap value = 1 }
			change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			subtract_variable = { which = IR_InfrPrjCC value = 1 }
			change_variable = { which = IR_InfrPrjIL value = 2 }
		}
		if = {
			limit = { has_province_modifier = floodplain }
			change_variable = { which = IR_pop_production value = 4 } 
			change_variable = { which = IR_prov_pop_cap value = 2 }
			subtract_variable = { which = IR_prov_infrastructure_cap value = 2 }
			change_variable = { which = IR_InfrPrjCC value = 2 }
			subtract_variable = { which = IR_InfrPrjIL value = 2 }
		}
		if = {
			limit = { has_province_modifier = lakeshore }
			change_variable = { which = IR_pop_production value = 1 } 
			change_variable = { which = IR_prov_pop_cap value = 1 }
			change_variable = { which = IR_prov_infrastructure_cap value = 1 }
			change_variable = { which = IR_InfrPrjCC value = 1 }
			change_variable = { which = IR_InfrPrjIL value = 1 }
		}
		

		## infr prj
		if = {
			limit = { has_province_modifier = irrigation }
			change_variable = { which = IR_pop_production value = 6 } 
			change_variable = { which = IR_prov_pop_cap value = 2 }
			change_variable = { which = IR_prov_infrastructure_cap value = 1 }
			change_variable = { which = IR_InfrPrjCC value = 2 }
			change_variable = { which = IR_InfrPrjIL value = 1 }
		}
		if = {
			limit = { has_province_modifier = gardens }
			change_variable = { which = IR_pop_production value = 2 } 
			change_variable = { which = IR_prov_pop_cap value = 3 }
			change_variable = { which = IR_prov_infrastructure_cap value = 1 }
			change_variable = { which = IR_InfrPrjCC value = 3 }
			change_variable = { which = IR_InfrPrjIL value = 1 }
		}
		if = {
			limit = { has_province_modifier = wells }
			change_variable = { which = IR_pop_production value = 4 } 
			change_variable = { which = IR_prov_pop_cap value = 4 }
			change_variable = { which = IR_prov_infrastructure_cap value = 1 }
			change_variable = { which = IR_InfrPrjCC value = 4 }
			change_variable = { which = IR_InfrPrjIL value = 1 }
		}
		if = {
			limit = { has_province_modifier = terrace }
			change_variable = { which = IR_pop_production value = 3 } 
			change_variable = { which = IR_prov_pop_cap value = 3 }
			change_variable = { which = IR_prov_infrastructure_cap value = 3 }
			change_variable = { which = IR_InfrPrjCC value = 3 }
			change_variable = { which = IR_InfrPrjIL value = 3 }
		}
		if = {
			limit = { has_province_modifier = dikes }
			change_variable = { which = IR_prov_pop_cap value = 5 }
			change_variable = { which = IR_prov_infrastructure_cap value = 5 }
			change_variable = { which = IR_InfrPrjCC value = 5 }
			change_variable = { which = IR_InfrPrjIL value = 5 }
		}
		if = {
			limit = { has_province_modifier = breakwaters } 
			change_variable = { which = IR_prov_pop_cap value = 1 }
			change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			change_variable = { which = IR_InfrPrjCC value = 1 }
			change_variable = { which = IR_InfrPrjIL value = 2 }
		}
		if = {
			limit = { has_province_modifier = lighthouse }
			change_variable = { which = IR_prov_infrastructure_cap value = 2 }
			change_variable = { which = IR_InfrPrjIL value = 2 }
		}
		if = {
			limit = { has_province_modifier = dam }
			change_variable = { which = IR_pop_production value = 2 } 
			change_variable = { which = IR_prov_pop_cap value = 4 }
			change_variable = { which = IR_prov_infrastructure_cap value = 4 }
			change_variable = { which = IR_InfrPrjCC value = 4 }
			change_variable = { which = IR_InfrPrjIL value = 4 }
		}
		
		##
		#famine %
		set_variable = { which = IR_prov_famine_chance value = 0 }
		change_variable = {
			which = IR_prov_famine_chance
			which = IR_prov_pop
		}
		subtract_variable = {
			which = IR_prov_famine_chance
			which = IR_prov_pop_cap
		}
		trigger_switch = {
			on_trigger = has_building
			training_fields = { subtract_variable = { which = IR_prov_famine_chance value = 1 } }
			infirmary = { subtract_variable = { which = IR_prov_famine_chance value = 2 } }
			hospital = { subtract_variable = { which = IR_prov_famine_chance value = 3 } }
			public_sanitation = { subtract_variable = { which = IR_prov_famine_chance value = 4 } }
		}
	
		#multiply_variable = {
		#	which = IR_pop_production 
		#	which = IR_growth_efficiency
		#}
		#multiply_variable = {
		#	which = IR_wealth_production 
		#	which = IR_growth_efficiency
		#}
		#Census View
		change_variable = {
			which = IR_pop_growth
			which = IR_pop_production
		}
		subtract_variable = {
			which = IR_pop_growth
			which = IR_consumption
		}
		change_variable = {
			which = IR_wealth_growth
			which = IR_wealth_production
		}	
		divide_variable = {
			which = IR_wealth_growth
			which = IR_logistics
		}		
	}
}

IR_dev_calc = {
	hidden_effect = {
	#IR_check_dev_variables = yes
		change_variable = {
			which = IR_pop_progress
			which = IR_pop_growth
		}
		change_variable = {
			which = IR_wealth_progress
			which = IR_wealth_growth
		}
		
		#WEALTH CALC
		if = {
			limit = { 
				check_variable = { which = IR_wealth_progress value = 100 }
			}
			add_base_tax = 1
			subtract_variable = {
				which = IR_wealth_progress
				value = 100
			}
		}
		#else_if = { # lose wealth
		#	limit = { NOT = { check_variable = { which = IR_wealth_progress value = 1 } } }
		#	if = {
		#		limit = { base_tax = 2 }
		#		add_base_tax = -1
		#	}
		#	set_variable = {
		#		which = IR_wealth_progress
		#		value = 99
		#	}
		#}
		#POP CALC
		if = {
			limit = { 
				check_variable = { which = IR_pop_progress value = 100 }
			}
			subtract_variable = {
				which = IR_pop_progress
				value = 100
			}
			if = {
				limit = { base_manpower = 4 NOT = { OR = { has_province_modifier = is_rural has_building = village has_building = town has_building = city has_building = metropolis } } }
				add_base_manpower = 1
				province_event = { id = IR_development.4 days = 0 }
			}
			else_if = {
				limit = { has_province_modifier = is_rural }
				owner = {
					random_owned_province = {
						limit = { OR = { has_building = village has_building = town has_building = city has_building = metropolis } }
						add_base_manpower = 1
					}
				}
			}
			else = { 
				add_base_manpower = 1
			}
		}
		else_if = { # lose pop
			limit = { NOT = { check_variable = { which = IR_pop_progress value = 1 } } }
			if = {
				limit = { base_manpower = 2 }
				add_base_manpower = -1
			}
			set_variable = {
				which = IR_pop_progress
				value = 50
			}
		}
		
		
		
	
		#Famine calc
		if = {
			limit = { base_manpower = 2 } #WILL ONLY CHECK IF YOU HAVE POPULATION TO LOSE - OTHERWISE IS MOOT
			IR_check_famine = yes
		}
	}
}

