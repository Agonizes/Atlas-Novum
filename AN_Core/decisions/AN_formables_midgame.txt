#Amyzonis' AN overhaul of formables

country_decisions = {

#### Post-Discovery Formables	 
# Spain	 
AN_spain_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_spain_flag }
		SPA = { exists = no }
		IBE = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = LSA
			}
			religion_group = muslim #Andalusia for Muslims
		}
		OR = {
			primary_culture = castillian	
			primary_culture = asturian
			primary_culture = extremaduran
			primary_culture = aragonese
			primary_culture = catalan
			primary_culture = leonese
		}
	}
	provinces_to_highlight = {
		province_group = spain_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		
		if = { 
			limit = { OR = { tag = CAS tag = LON } }
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				province_group = spain_group
				value = 20 #?
			}
			220 = { country_or_non_sovereign_subject_holds = ROOT }
			333 = { country_or_non_sovereign_subject_holds = ROOT }
			214 = { country_or_non_sovereign_subject_holds = ROOT }
			213 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		if = { limit = { tag = ARA } 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				province_group = spain_group
				value = 20 #?
			}
			1746 = { country_or_non_sovereign_subject_holds = ROOT }
			217 = { country_or_non_sovereign_subject_holds = ROOT }
			219 = { country_or_non_sovereign_subject_holds = ROOT }
			208 = { country_or_non_sovereign_subject_holds = ROOT }
		}
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = spain_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = SPA	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = SPA_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_spain_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}
	
# Lusitania	
AN_lusitania_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_lusitania_flag }
		LSA = { exists = no }
		IBE = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = SPA
			}
			religion_group = muslim #Andalusia for Muslims
		}
		OR = {
			primary_culture = portugese
			primary_culture = galician
		}
	}
	provinces_to_highlight = {
		province_group = lusitania_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = lusitania_group
			value = 36 #?
		}
		227 = { country_or_non_sovereign_subject_holds = ROOT }
		231 = { country_or_non_sovereign_subject_holds = ROOT }
		208 = { country_or_non_sovereign_subject_holds = ROOT }
		206 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = lusitania_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = LSA	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = LSA_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_lusitania_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# Andalusia
AN_andalusia_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_andalusia_flag }
		ADU = { exists = no }
		IBE = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal
			}
		}
		religion_group = muslim #Andalusia for Muslims
		OR = {
			primary_culture = andalusi_culture	
			primary_culture = andalucian
			AND = {
				culture_group = berber
				any_owned_province = { region = iberia_region }
			}
			AND = {
				culture_group = turko_semitic
				any_owned_province = { region = iberia_region }
			}
		}
	}
	provinces_to_highlight = {
		province_group = andalusia_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = andalusia_group
			value = 30 #?
		}
		223 = { country_or_non_sovereign_subject_holds = ROOT }
		224 = { country_or_non_sovereign_subject_holds = ROOT }
		225 = { country_or_non_sovereign_subject_holds = ROOT }
		1748 = { country_or_non_sovereign_subject_holds = ROOT }
		10012 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = andalusia_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = ADU	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = ADU_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_andalusia_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# Occitania
AN_occitania_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_occitania_flag }
		OCC = { exists = no }
		AGV = { exists = no }
		IBE = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = SPA
				tag = LSA
				tag = ADU
				tag = FRA
				tag = ENG
				tag = GBR
				tag = UNK
			} 
		}
		culture_group = occitan
	}
	provinces_to_highlight = {
		province_group = occitania_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = occitania_group
			value = 30 #?
		}
		213 = { country_or_non_sovereign_subject_holds = ROOT }
		200 = { country_or_non_sovereign_subject_holds = ROOT }
		201 = { country_or_non_sovereign_subject_holds = ROOT }
		174 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = occitania_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = OCC	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = OCC_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_occitania_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# France
AN_france_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_france_flag }
		FRA = { exists = no }
		AGV = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = OCC
				tag = ENG
				tag = GBR
				tag = UNK
			} 
		}
		culture_group = french
	}
	provinces_to_highlight = {
		province_group = france_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = france_group
			value = 30 #?
		}
		183 = { country_or_non_sovereign_subject_holds = ROOT }
		184 = { country_or_non_sovereign_subject_holds = ROOT }
		186 = { country_or_non_sovereign_subject_holds = ROOT }
		167 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = france_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = FRA	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = FRA_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_france_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# England
AN_england_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_england_flag }
		ENG = { exists = no }
		GBR = { exists = no }
		UNK = { exists = no }
		AGV = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = OCC
				tag = FRA
				tag = GBR
				tag = UNK
				tag = SCO
				tag = IRE
				tag = ANI
				tag = WLS
				tag = WMC
			} 
		}
		OR = {
			primary_culture = english
			primary_culture = mercian
			primary_culture = northumbrian
			primary_culture = kentish
		}
	}
	provinces_to_highlight = {
		province_group = england_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = england_group
			value = 30 #?
		}
		236 = { country_or_non_sovereign_subject_holds = ROOT }
		244 = { country_or_non_sovereign_subject_holds = ROOT }
		245 = { country_or_non_sovereign_subject_holds = ROOT }
		239 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = england_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = ENG	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = ENG_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_england_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# Wales
AN_wales_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_wales_flag }
		WLS = { exists = no }
		GBR = { exists = no }
		UNK = { exists = no }
		AGV = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = ENG
				tag = GBR
				tag = UNK
				tag = SCO
				tag = IRE
				tag = ANI
				tag = WMC
			} 
		}
		primary_culture = welsh
	}
	provinces_to_highlight = {
		province_group = wales_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = wales_group
			value = 10 #?
		}
		242 = { country_or_non_sovereign_subject_holds = ROOT }
		241 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = wales_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = WLS	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = WLS_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_wales_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# Scotland
AN_scotland_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_scotland_flag }
		GBR = { exists = no }
		UNK = { exists = no }
		AGV = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = ENG
				tag = GBR
				tag = UNK
				tag = WLS
				tag = IRE
				tag = ANI
				tag = WMC
			} 
		}
		OR = {
			primary_culture = scottish
			primary_culture = highland_scottish
			primary_culture = gallgaidheil
		}
	}
	provinces_to_highlight = {
		province_group = scotland_group
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			province_group = scotland_group
			value = 30 #?
		}
		248 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { province_group = scotland_group } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = SCO	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = SCO_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_scotland_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# Britain
AN_britain_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_britain_flag }
		GBR = { exists = no }
		UNK = { exists = no }
		AGV = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = OCC
				tag = FRA
				tag = UNK
				tag = IRE
				tag = ANI
				tag = WMC
			} 
		}
		capital_scope = { 
	}
	provinces_to_highlight = {
		region = british_isles_region
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			region = british_isles_region
			value = 30 #?
		}
		236 = { country_or_non_sovereign_subject_holds = ROOT }
		244 = { country_or_non_sovereign_subject_holds = ROOT }
		245 = { country_or_non_sovereign_subject_holds = ROOT }
		239 = { country_or_non_sovereign_subject_holds = ROOT }
		242 = { country_or_non_sovereign_subject_holds = ROOT }
		241 = { country_or_non_sovereign_subject_holds = ROOT }
		248 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { region = british_isles_region } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = GBR	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = GBR_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_britain_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}

# Ireland
AN_ireland_nation = { 
	major = yes
	potential = {
		NOT = { has_country_flag = formed_ireland_flag }
		IRE = { exists = no }
		NOT = { 
			OR = { 
				government = native 
				government = tribal 
				tag = ENG
				tag = GBR
				tag = UNK
				tag = WLS
				tag = SCO
				tag = ANI
				tag = WMC
			} 
		}
		primary_culture = irish
	}
	provinces_to_highlight = {
		region = ireland_area
	}
	allow = {
		NOT = { current_age = age_of_discovery }
		is_at_war = no
		num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
			region = ireland_area
			value = 30 #?
		}
		373 = { country_or_non_sovereign_subject_holds = ROOT }
	}
	effect = {
		#Integrate PUs, Domains, Fiefs
		every_subject_country = { 
			limit = { capital_scope = { region = ireland_area } OR = { is_subject_of_type = personal_union is_subject_of_type = dominion is_subject_of_type = fief } }
			ROOT = { inherit = PREV }
		}
		
		#Change Tag
		change_tag = IRE	
		
		#Set Govt Rank	
		if = { 
			limit = { NOT = { government_rank = 4 } }
			set_government_rank = 4
		}
		
		#Rewards
		add_prestige = 25
		add_country_modifier = {
			name = centralization_modifier
			duration = 7300
		}
		
		#Change Ideas
		if = {
			limit = {
				has_custom_ideas = no
				NOT = { has_idea_group = IRE_ideas }
			}
			country_event = { id = ideagroups.1 } #Swap Ideas
		}
		
		#Disable decision
		set_country_flag = formed_ireland_flag
	}
	ai_will_do = {
		factor = 1
	}
	ai_importance = 400 #
}


}