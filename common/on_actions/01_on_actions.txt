
on_startup = {
	#Apparently, the below vanilla code below must be included in the on_startup of any mod added on_action file, else problems arise with CoC content.... absolutely bizarre, but what can one do? Better safe than sorry.
	events = {
		muslim_school_events.20 #Pick School
		#amyzonis
		soft_wasteland.1 #assign soft wastelands
	}
	if = {
		limit = {
			has_dlc = "Cradle of Civilization"
			has_country_modifier = tur_janissary
		}
		remove_country_modifier = tur_janissary
	}
	initialize_schools_effect = yes #This is only used here but is used for readability of on_action file.
	#Apparently, the above vanilla code above must be included in the on_startup of any mod added on_action file, else problems arise with CoC content.... absolutely bizarre, but what can one do? Better safe than sorry.
	#New for better addon support
	if = {
		limit = { NOT = { has_global_flag = beyond_typus_mod_enabled } }
		set_global_flag = beyond_typus_mod_enabled
	}
}

on_mercenary_recruited = {
	FROM = {
		add_army_professionalism = -0.0005
	}
}

# province
# root = location, from = winning country
on_siege_lost_province =  {
	events = {
		development.1
		war_of_the_roses.10		# Lancaster Stronghold
		war_of_the_roses.11		# York Stronghold
		french_wars_of_religion.7 #Ravening Religious Fanatics
		french_wars_of_religion.9 #french_wars_of_religion.9
	}
}

# country 
on_new_monarch = {
	if = {
		limit = {
			government = high_kingship
			NOT = { has_country_flag = bt_abolition_of_tanistry_succession }
		}
		set_country_flag = bt_tanistry_king_just_died
		clr_country_flag = bt_tanistry_high_queen_reigning
		remove_country_modifier = bt_uncertainty_about_a_high_queen
		country_event = { id = BeyondTypusCelticFlavour.1 days = 1 }				#New Tanist election
		country_event = { id = BeyondTypusCelticFlavour.6 days = 1 }			#High Queen comes to power, will only fire for female rulers
	}
}

# country
on_monarch_death = {
	if = {
		limit = {
			government = high_kingship
			NOT = { has_country_flag = bt_abolition_of_tanistry_succession }
		}
		set_country_flag = bt_tanistry_king_just_died
		clr_country_flag = bt_tanistry_high_queen_reigning
		remove_country_modifier = bt_uncertainty_about_a_high_queen
		remove_country_modifier = bt_tanistry_underaged_heir
		remove_country_modifier = bt_tanistry_female_heir
		remove_country_modifier = bt_tanistry_waiting_on_heir
	}
}

# country
on_heir_death = {
	if = {
		limit = {
			government = high_kingship
			NOT = { has_country_flag = bt_abolition_of_tanistry_succession }
		}
		remove_country_modifier = bt_tanistry_underaged_heir
		remove_country_modifier = bt_tanistry_female_heir
		country_event = { id = BeyondTypusCelticFlavour.8 days = 1 }			#Tanist dies, new tanist event
	}
}

# country
on_new_heir = {
	if = {
		limit = {
			government = high_kingship
			has_country_modifier = bt_tanistry_waiting_on_heir
			NOT = { has_country_flag = bt_abolition_of_tanistry_succession }
		}
		country_event = { id = BeyondTypusCelticFlavour.2 days = 1 }			#Male heir born/introduced			- doesn't seem to work, I'll look into this later, added a 1 day MTTH in the meantime
		country_event = { id = BeyondTypusCelticFlavour.3 days = 1 }			#Female heir born/introduced			- doesn't seem to work, I'll look into this later, added a 1 day MTTH in the meantime
	}
}

