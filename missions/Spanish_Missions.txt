#Orion Spanish mission overhaul
#slot 1
spa_slot_1 = {

	slot = 1
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	iberian_wedding = {
		icon = mission_alliances
		required_missions = { spa_good_heir }
		position = 2
		
		trigger = {
			OR = {
				CAS = { overlord_of = ARA }
			}
		}
		
		effect = {
			upper_andalucia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_territorial_core = ROOT
			}
			if = {
				limit = {
					exists = NAV
					is_subject = no
					NAV = {
						is_subject = no
					}
				}
				add_casus_belli = {
					type = cb_restore_personal_union
					months = 600
					target = NAV
				}
			}
		}
	}
	
	prevail_cas_succession = {
		icon = mission_have_two_subjects
		required_missions = { iberian_wedding }
		position = 2
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = prevail_cas_succession.tooltip
				OR = {
					has_country_flag = had_cas_civil_war
					NOT = {
						current_age = age_of_discovery
					}
				}
				CAS = { overlord_of = ARA }
			}	
		}
		
		effect = {
			if = { 
				limit = { current_age = age_of_discovery CAS = { overlord_of = LON } }
				inherit = LON
				add_prestige = 25
			}
			if = { 
				limit = { NOT = { current_age = age_of_discovery } }
				stability = 2
			}
		}
	}
	
	cas_ally_habsburgs = {
		icon = mission_alliances
		required_missions = { prevail_cas_succession }
		position = 3
		
		trigger = {
			alliance_with = HAB
			marriage_with = HAB
		}
		
		effect = {
			ROOT = { country_event = { id = flavor_spa.13 days = 1 } }
		}
	}
	
	spa_acquire_lowlands = {
		icon = mission_rb_monopolize_the_channel
		required_missions = { cas_ally_habsburgs }
		position = 4
		
		
		provinces_to_highlight = {
			OR = { 
				region = low_countries_region
				area = picardy_area
			}
			country_or_non_sovereign_subject_holds = HAB
		}
		
		trigger = {
			has_global_flag = burgundian_succession_crisis	
			any_province = {
				limit = { region = low_countries_region }
				country_or_non_sovereign_subject_holds = HAB
			}
		}
		
		effect = {
			custom_tooltip = flavor_spa.15.tt
			hidden_effect = {
				HAB = {
					country_event = { id = flavor_spa.14 days = 1 }
					every_owned_province = {
						limit = {
							OR = {
								region = low_countries_region
								area = picardy_area
							}
						}
						add_core = ROOT
						remove_core = HAB
						cede_province = ROOT
					}
				}
			}
		}
	}
	
	spa_discover_laplata = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 6
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_la_plata

			}
		}
		
		trigger = {
			2883 = { has_discovered = ROOT }
			775 = { has_discovered = ROOT }
		
		}
		
		effect = {
			hidden_effect = {
				775 = {
					change_religion = ROOT	
					change_culture = castillian
					add_building = fort_15th
					add_territorial_core = ROOT
				}
			}
			775 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_colonize_laplata = {
		icon = mission_colonial
		required_missions = { spa_discover_laplata }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_la_plata
				colonial_region = colonial_chile
				colonial_region = colonial_uruguay
				colonial_region = colonial_paraguay
			}
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_la_plata
			}	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 9
				colonial_region = colonial_chile
			}	
			colonial_uruguay = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			colonial_paraguay = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			
		}
		
		effect = {
			778 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			776 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			hidden_effect = {
				colonial_chile = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_empty = yes }
					add_territorial_core = ROOT
				}
				colonial_la_plata = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { has_climate = arid } is_empty = yes }
					add_territorial_core = ROOT
				}
			}
			colonial_la_plata = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { has_climate = arid } is_empty = yes }
				cede_province = ROOT
			}
			colonial_chile = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_empty = yes }
				cede_province = ROOT
			}
		}
	}
	

	spa_conquer_palawan = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = mindanao_area
				area = west_mindanao_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			palawan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
			brunei_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT  } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_borneo = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_palawan }
		position = 15
		
		provinces_to_highlight = {
			OR = {
				area = brunei_area
				area = kutai_area
				area = kalimantan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			brunei_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kutai_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			kalimantan_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 50
			2709 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			malacca_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			malaya_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			tenasserim_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			west_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			central_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			east_java_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	
	spa_conquer_malaysia = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_borneo }
		position = 16
		
		provinces_to_highlight = {
			OR = {
				area = malacca_area
				area = malaya_area
				area = tenasserim_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			malacca_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malaya_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			tenasserim_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 50 
			596 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
}
#slot 2
spa_slot_2 = {

	slot = 2
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_good_heir = {
		icon = mission_have_two_subjects
		required_missions = { }
		position = 1
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = good_heir.tooltip
				heir_adm = 3
				heir_dip = 3
				heir_mil = 3
			}
		}
		
		effect = {
		}
	}
	
	develop_castile = {
		icon = mission_early_game_buildings
		required_missions = { spa_good_heir }
		position = 2
		
		
		trigger = {
			temple = 5
			workshop = 5
			total_development = 300
		}
		
		effect = {
			add_adm_power = 50
			add_country_modifier = {
				name = "building_spree"
				duration = 9125
			}
		}
	}
	
	
	subjugate_navarra = {
		icon = mission_monarch_in_throne_room
		required_missions = { iberian_wedding }
		position = 3
		
		provinces_to_highlight = {
			if = { 
				limit = { NAV = { exists = yes } }
				owned_by = NAV
			}
			else_if = { 
				limit = { NAV = { exists = no } }
				province_id = 210
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			if = { 
				limit = { NAV = { exists = yes } }
				NAV = { 
					is_subject_of = ROOT 
					OR = {
						junior_union_with = ROOT
						is_subject_of_type = fief 
					}
				}	
			}
			else_if = {
				limit = { NAV = { exists = no } }
				210 = { country_or_non_sovereign_subject_holds = ROOT }
			}
		}
		
		effect = {
			
		}
	}
	
	
	spa_inquisition = {
		icon = mission_european_church
		required_missions = { prevail_cas_succession }
		position = 4
		
		trigger = {
			OR = {
				religion = protestant
				religion = reformed
				religion = anglican
				AND = {
					religion = catholic
					has_country_modifier = "counter_reformation"
				}
			}
		}
		
		effect = {
			if = {
				limit = { religion = protestant }
				custom_tooltip = churchpower.tooltip
				hidden_effect = {
					add_church_power = 50
				}
			}
			if = {
				limit = { religion = reformed }
				custom_tooltip = fervor.tooltip
				hidden_effect = {
					add_fervor = 50
				}
			}
			if = {
				limit = { religion = anglican }
				custom_tooltip = churchpower.tooltip
				hidden_effect = {
					add_church_power = 50
				}
			}
			if = {
				limit = { religion = catholic }
				add_papal_influence = 20
			}
			add_country_modifier = {
				name = "eng_rb_state_religion_mod"
				duration = 7300
			}
		}
	}
	
	spa_lead_iberian_union = {
		icon = mission_have_two_subjects
		required_missions = { spa_inquisition }
		position = 5
		
		trigger = {
			if = {
				limit = { POR = { exists = yes } }
				senior_union_with = POR
			}
			else_if = {
				limit = { POR = { exists = no } }
				beieras_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
				alentejo_area = {
					type = all
					country_or_non_sovereign_subject_holds = ROOT
				}
			}
			
		}
		
		effect = {
			add_adm_power = 100
		}
	}
	
	spa_discover_colombia = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 6
		
		provinces_to_highlight = {
			OR = { 
				area = venezuela_area
				area = leeward_antilles_area
			}
		}
		
		trigger = {
			venezuela_area = { type = all has_discovered = ROOT }
			leeward_antilles_area = { type = all has_discovered = ROOT }
		}
		
		effect = {
			add_dip_power = 25
			hidden_effect = {
				5579 = {
					add_territorial_core = ROOT	
					change_religion = ROOT	
					change_culture = castillian
				}
				#502 = {
				#	add_territorial_core = ROOT	
				#	change_religion = ROOT	
				#	change_culture = castillian
				#	add_building = fort_15th
				#}
				741 = {
					add_territorial_core = ROOT
					change_religion = ROOT	
					change_culture = castillian
				}
				2806 = {
					add_territorial_core = ROOT
					change_religion = ROOT	
					change_culture = castillian
					add_building = fort_15th
				}
			}
			5579 = { cede_province = ROOT }	
			#502 = { cede_province = ROOT }
			741 = { cede_province = ROOT }
			2806 = { cede_province = ROOT }
		}
	}
	
	spa_colonize_colombia = {
		icon = mission_colonial
		required_missions = { spa_discover_colombia }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				area = venezuela_area
				area = maracaibo_area
				area = eastern_llanos
			}
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 12
				colonial_region = colonial_colombia
			}	
		}
	
		
		effect = {
			add_dip_power = 25
			hidden_effect = {
				coquivacoa_area = {
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					change_religion = ROOT	
					change_culture = castillian
				}
				bogota_area = {
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					change_religion = ROOT	
					change_culture = castillian
				}
				2260 = {
					add_building = fort_15th
				}
				
			}
			831 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			
			bogota_area = {
				limit = { is_empty = yes }
				cede_province = ROOT		
			}
			
			coquivacoa_area = {
				limit = { is_empty = yes }
				cede_province = ROOT		
			}
			MCA = {
				every_owned_province = {
					add_permanent_claim = ROOT 
				}
			}
		}
	}
	
	spa_conquer_musica = {
		icon = mission_cannons_firing
		required_missions = { spa_colonize_colombia }
		position = 8
		
		provinces_to_highlight = {
			OR = {
				province_id = 832
				province_id = 825
				province_id = 2817
			}
		}
		
		trigger = {
			MCA = { exists = no }
			832 = { country_or_non_sovereign_subject_holds = ROOT }
			825 = { country_or_non_sovereign_subject_holds = ROOT }
			2817 = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		effect = {	
			define_conquistador = {
				name = "Francisco Pizzaro"
    			shock = 5
   				fire = 3
   				manuever = 5
    			siege = 2
			}
			hidden_effect = {
				panama_area = {
					limit = { is_empty = yes }
					add_territorial_core = ROOT	
					change_religion = ROOT	
					change_culture = castillian
				}
			}
			panama_area = {
				limit = { is_empty = yes }
				cede_province = ROOT		
			}
			835 = { 
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				} 
			}
		}
	}
	
	spa_pizarro = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_musica }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				province_id = 2647
				province_id = 852
				province_id = 849
				province_id = 850
			}
		}
		
		trigger = { 
			808 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			809 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			812 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			802 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			795 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
		}
	
		effect = {
			hidden_effect = {
				787 = {
					change_religion = ROOT	
					change_culture = castillian
					
				}
				809 = {
					change_religion = ROOT	
					change_culture = castillian
					 
				}
				colonial_colombia = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_city = yes }
					add_territorial_core = ROOT
				}
				colonial_peru = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_city = yes }
					add_territorial_core = ROOT
				}
				colonial_chile = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } has_climate = arid }
					add_territorial_core = ROOT
				}
				colonial_bolivia = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				794 = { add_territorial_core = ROOT cede_province = ROOT } 
				2837 = { add_territorial_core = ROOT cede_province = ROOT }
			}
			colonial_colombia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_city = yes }
					cede_province = ROOT
			}
			colonial_peru = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_city = yes }
				cede_province = ROOT
			}
			colonial_chile = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } has_climate = arid }
				cede_province = ROOT
			}
			colonial_bolivia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			2942 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			808 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			820 = {
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			787 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
				add_permanent_province_modifier = {
						name = "spa_audiencia"
						duration = -1
					}
			}
			809 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
				add_permanent_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_conquer_luzon = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			southern_luzon_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			
		}
	}
	
	spa_conquer_sulawesi = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_palawan }
		position = 15
		
		provinces_to_highlight = {
			OR = {
				area = sulawesi_area
				area = south_sulawesi_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			sulawesi_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			south_sulawesi_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 50
			2716 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	
	spa_conquer_java = {
		icon = mission_cannons_firing
		required_missions = { spa_conquer_borneo }
		position = 16
		
		provinces_to_highlight = {
			OR = {
				area = east_java_area
				area = central_java_area
				area = west_java_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			628 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			east_java_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			central_java_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			west_java_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_mil_power = 50		
		}
	}
}
#slot 3
spa_slot_3 = {
	
	slot = 3
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_colonize_canaries_culture = {
		icon = mission_colonial
		required_missions = { spa_colonize_canaries }
		position = 2
		
		provinces_to_highlight = {
			OR = { 
				province_id = 5096
				province_id = 366
			}
			NOT = { culture_group = ROOT }
		}
		
		trigger = { 
			5096 = { country_or_non_sovereign_subject_holds = ROOT culture_group = ROOT }
			366 = { country_or_non_sovereign_subject_holds = ROOT culture_group = ROOT }
		}
		
		effect = {
			add_dip_power = 50
			add_prestige = 10
		}
	}
	
	spa_discover_america = {
		icon = mission_establish_high_seas_navy
		required_missions = { }
		position = 3
		
		provinces_to_highlight = {
			OR = { 
				continent = north_america
				continent = south_america
			}
		}
		
		trigger = { 
			OR = {
				north_america = { type = any has_discovered = ROOT }
				south_america = { type = any has_discovered = ROOT }
			}
		}
		
		effect = {
			add_dip_power = 25
			add_prestige = 25
			define_explorer = {
				name = "Bartolomew Columbus"
   				shock = 2
   				fire = 2
   				manuever = 5
   				siege = 2
			}
		}
	}
	
	spa_discover_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_america }
		position = 4
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_hispaniola
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			colonial_hispaniola = { type = any has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			hidden_effect = {
				489 = {
					change_trade_goods = sugar
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			489 = { cede_province = ROOT }	
			add_country_modifier = {
				name = "spa_hispaniola_discovered"
				duration = 7300
			}
		}
	}
	
	
	
	spa_discover_puerto_rico = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_hispaniola }
		position = 5
		
		provinces_to_highlight = {
			OR = { 
				province_id = 492
				province_id = 5568
			}
		}
		
		trigger = { 
			492 = { has_discovered = ROOT }
			5568 = { has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 50
			hidden_effect = {
				492 = {
					change_trade_goods = sugar
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			492 = { cede_province = ROOT }	
			
			hidden_effect = {
				5568 = {
					change_trade_goods = sugar
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			5568 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			
		}
	}
	
	
	spa_colonize_hispaniola = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 6
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_hispaniola
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				colonial_region = colonial_hispaniola
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_hispaniola = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			colonial_hispaniola = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_discover_yucatan = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_colonize_hispaniola }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_yucatan
				province_id = 2637
				province_id = 840
				province_id = 843
				province_id = 2636
			}
		}
		
		trigger = { 
			colonial_yucatan = { type = all has_discovered = ROOT }
			840 = { has_discovered = ROOT }
			2637 = { has_discovered = ROOT }
			843 = { has_discovered = ROOT }
			2636 = { has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			hidden_effect = {
				840 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
				2637 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
				every_province = {
					limit = { OR = { religion = nahuatl religion = mesoamerican_religion } }
					add_permanent_claim = ROOT 
				}
			}
			840 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
			2637 = { cede_province = ROOT }	
			
		}
	}	
	
	spa_cortes = {
		icon = mission_cannons_firing
		required_missions = { spa_discover_yucatan }
		position = 8
		
		provinces_to_highlight = {
			OR = {
				province_id = 2647
				province_id = 852
				province_id = 849
				province_id = 850
			}
		}
		
		trigger = { 
			2647 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			852 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			849 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
			850 = {
				OR = {
					controlled_by = ROOT 
					country_or_non_sovereign_subject_holds = ROOT 
				}
			}
		}
	
		effect = {
			hidden_effect = {
				2647 = {
					change_religion = ROOT	
					change_culture = castillian
					add_building = fort_15th
				}
			
				colonial_mexico = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			colonial_mexico = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			852 = {
			 	add_province_modifier = {
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}	
	
	spa_mexico = {
		icon = mission_colonial
		required_missions = { spa_cortes }
		position = 9
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_mexico
				colonial_region = colonial_ngalicia
				colonial_region = colonial_durango
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			colonial_mexico = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			colonial_ngalicia = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
	
		effect = {
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_upper_mexico = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 10
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_mexico
				colonial_region = colonial_ngalicia
				colonial_region = colonial_durango
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				colonial_region = colonial_durango
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_durango = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				arizona_area = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				baja_california_area = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			2621 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
			colonial_durango = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			arizona_area = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			baja_california_area = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			
		}
	}
	
	
	spa_colonize_cali = {
		icon = mission_colonial
		required_missions = { spa_upper_mexico }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_california
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 14
				colonial_region = colonial_california
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_california = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				colonial_deseret = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			colonial_california = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			colonial_deseret = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	
	spa_contest_oregon = {
		icon = mission_cannons_firing
		required_missions = { spa_colonize_cali }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_oregon
				colonial_region = colonial_columbia
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_oregon
			}
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_columbia
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_columbia = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_empty = yes }
					add_territorial_core = ROOT
				}
				colonial_oregon = {
					limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_empty = yes }
					add_territorial_core = ROOT
				}
			}
			colonial_columbia = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_empty = yes }
				cede_province = ROOT
			}
			colonial_oregon = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } is_empty = yes }
				cede_province = ROOT
			}
		}
	}
	
	
	spa_discover_east_indies = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				province_id = 4352
			}
		}
		
		trigger = { 
			4352 = { has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			4352 = { add_territorial_core = ROOT cede_province = ROOT }
			
		}
	}
	
	spa_conquer_philip_isles = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			visayas_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			
		}
	}
		
	spa_conquer_philippines = {
		icon = mission_empire
		required_missions = { spa_conquer_philip_isles spa_conquer_palawan spa_conquer_mindanao spa_conquer_luzon }
		position = 15
		
		provinces_to_highlight = {
			OR = { 
				area = visayas_area
				area = mindanao_area
				area = west_mindanao_area
				area = palawan_area
				area = luzon_area
				area = southern_luzon_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_luzon_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			palawan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			visayas_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_mindanao_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_dip_power = 100
			656 = {	
				add_province_modifier = { 
					name = "spa_audiencia"
					duration = -1
				}
			}
		}
	}
	
	spa_east_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_conquer_philippines spa_conquer_malaysia spa_conquer_java }
		position = 17
		
		provinces_to_highlight = {
			OR = {
				region = indonesia_region
				region = moluccas_region
				area = malacca_area
				area = malaya_area
				area = tenasserim_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			indonesia_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			moluccas_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malacca_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			malaya_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			tenasserim_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
	
}

#slot 4
spa_slot_4 = {
	
	slot = 4
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_colonize_canaries = {
		icon = mission_colonial
		required_missions = { }
		
		trigger = {
			5096 = { country_or_non_sovereign_subject_holds = ROOT }
			366 = { country_or_non_sovereign_subject_holds = ROOT }
			CNR = { exists = no }
		}
		
		effect = {
			add_mil_power = 50
			5096 = {
				add_building = fort_15th
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
				hidden_effect = { 
					change_trade_goods = sugar
				}
			}
			upper_andalucia_area = { 
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT	
			}
		}
	}
	
	finish_reconqista = {
		icon = mission_cannons_firing
		required_missions = { spa_colonize_canaries }
		
		position = 2
		
		provinces_to_highlight = {
			OR = {
				area = upper_andalucia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			upper_andalucia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 100
			add_country_modifier = {
				name = "completing_the_reconquista"
				duration = 7300
			}
			upper_andalucia_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			335 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
			337 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				add_permanent_claim = ROOT
			}
		}
	}
	
	control_melilla = {
		icon = mission_unite_home_region
		required_missions = { finish_reconqista }
		position = 3
		
		provinces_to_highlight = {
			province_id = 335
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			335 = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					custom_trigger_tooltip = {
						tooltip = control_prov.tooltip
						if = {
							limit = { 335 = { owner = { ai = yes } } }
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
		}
		
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 335
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 50
			335 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
		}
	}
	
	spa_conquer_buffer_morocco = {
		icon = mission_cannons_firing
		required_missions = { control_melilla }
		position = 4
		
		
		provinces_to_highlight = {
			OR = { 
				area = northern_morocco_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			northern_morocco_area = {
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 50
		}
	}
	
	spa_consolidate_morocco = {
		icon = mission_empire
		required_missions = { spa_conquer_buffer_morocco }
		position = 5
		
		provinces_to_highlight = {
			OR = {
				area = western_morocco_area
				area = marrekesh_area
				area = sus_area
				area = southern_morocco_area
				area = northern_morocco_area
				area = tagmudant_area
				area = tafilalt_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			northern_morocco_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			western_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			marrekesh_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			sus_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			southern_morocco_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tafilalt_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_country_modifier = {
				name = "removed_mor_threat"
				duration = 7300
			}
			northern_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			western_morocco_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			marrekesh_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			sus_area = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
		}
	}
	
	spa_discover_cuba = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 6
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_cuba
			}
		}
		
		trigger = { 
			colonial_cuba = { type = all has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			hidden_effect = {
				2654 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
				2655 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
				484 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			484 = { cede_province = ROOT }	
			2654 = { cede_province = ROOT }
			2655 = { cede_province = ROOT }
		}
	}
	
	spa_colonize_cuba = {
		icon = mission_colonial
		required_missions = { spa_discover_cuba }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_cuba
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				colonial_region = colonial_cuba
				is_city = yes
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_cuba = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				discover_province = 2647
				discover_province = 1509
				discover_province = 1510
				discover_province = 1511
				discover_province = 1512
				2647 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			colonial_cuba = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			2647 = { cede_province = ROOT }
		}
	}

	
	spa_conquer_yucatan = {
		icon = mission_cannons_firing
		required_missions = { spa_discover_yucatan }
		position = 8
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_yucatan
				colonial_region = colonial_guatemala
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
			is_city = yes
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				colonial_region = colonial_yucatan
			}	
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				colonial_region = colonial_guatemala
			}
		}
	
		effect = {
			hidden_effect = {
				honduras_area = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				nicaragua_area = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			honduras_area = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			nicaragua_area = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_colonize_coahuila = {
		icon = mission_colonial
		required_missions = { spa_mexico }
		position = 10
				
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_coahuila
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				colonial_region = colonial_coahuila
			}	
			
		}
	
		effect = {
			hidden_effect = {
				colonial_coahuila = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
			}
			colonial_coahuila = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_conquer_tejas = {
		icon = mission_colonial
		required_missions = { spa_colonize_coahuila }
		position = 11
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_texas
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 15
				colonial_region = colonial_texas
			}	
			
		}
	
		effect = {
			hidden_effect = {
				colonial_texas = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				colonial_arizona = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}
				
			}
			colonial_texas = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
			colonial_arizona = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_conquer_louisiana = {
		icon = mission_colonial
		required_missions = { spa_conquer_tejas spa_control_nueva_orleans }
		position = 12
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_louisiana
				
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 20
				colonial_region = colonial_louisiana
			}	
			
		}
	
		effect = {
			hidden_effect = {
				colonial_louisiana = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
					add_territorial_core = ROOT
				}	
			}
			colonial_louisiana = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
				cede_province = ROOT
			}
		}
	}
	
	spa_conquer_mindanao = {
		icon = mission_trade_company_region_abroad
		required_missions = { spa_discover_east_indies }
		position = 14
		
		provinces_to_highlight = {
			OR = { 
				area = mindanao_area
				area = west_mindanao_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
			west_mindanao_area = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT 
			}
		}
	
		effect = {
			add_dip_power = 25
			add_mil_power = 25
			
		}
	}
	
	spa_outpost_pacific = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 17
		
		provinces_to_highlight = {
			OR = {
				region = oceanea_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oceanea_region = {
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			if = { 
				limit = { 1992 = { is_empty = yes } }
				hidden_effect = {
					1992 = {
						change_religion = ROOT	
						add_territorial_core = ROOT	
					}
				}
				1992 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "por_feitoria"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 1992 = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						1992 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						1992 = {
							owner = { country_event = { id = orion_seize.1 days = 0 } }
							change_religion = ROOT	
							add_territorial_core = ROOT	
						}	
					}
					1992
						cede_province = ROOT 
						add_province_modifier = {
							name = "por_feitoria"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						1992 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					if = { 
						limit = {
							1995 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							1995 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								add_territorial_core = ROOT	
							}
						}
						1995 = {
							cede_province = ROOT 
							add_province_modifier = {
								name = "por_feitoria"
								duration = -1
							}
						}	
					}
					else_if = { 
						limit = {
							1996 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							1996 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								add_territorial_core = ROOT	
							}
						}
						1996 = {
							cede_province = ROOT 
							add_province_modifier = {
								name = "por_feitoria"
								duration = -1
							}
						}	
					}
					else_if = { 
						limit = {
							1235 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
						}
						hidden_effect = {
							1235 = { 
								owner = { country_event = { id = orion_seize.1 days = 0 } }
								change_religion = ROOT	
								add_territorial_core = POR	
							}
						}
						1235 = {
							cede_province = ROOT 
							add_province_modifier = {
								name = "por_feitoria"
								duration = -1
							}
						}	
					}
					1992 = { add_permanent_claim = ROOT }
				}
			}
		}
	}
	
	spa_new_zeeland = {
		icon = mission_empire
		required_missions = { spa_outpost_pacific }
		position = 18
		
		provinces_to_highlight = {
			OR = {
				colonial_region = colonial_nz
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 16
				OR = {
					colonial_region = colonial_nz
				}
				is_city = yes
			}
		}
		
		effect = {
			tooltip = { new_zealand_region = { cede_province = ROOT } }
			hidden_effect = {
				every_province = {
					limit = { OR = { colonial_region = new_zealand_region } }
					if = { 
						limit = { is_empty = yes }
						add_territorial_core = ROOT	
						cede_province = ROOT
					}
					else_if = {
						limit = { is_colony = yes country_or_non_sovereign_subject_holds = ROOT  }
						add_colonysize = 999
					}
					else_of = { 
						limit = { is_city = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } }
						add_permanent_claim = ROOT
					}
				}	
			}
		}
	}
}

#slot 5
spa_slot_5 = {
	
	slot = 5
	generic = no
	ai = yes
	
	potential = {
		OR = {
			tag = CAS
			tag = SPA
		}
	}
	has_country_shield = yes
	
	spa_navy_build = {
		icon = mission_galleys_in_port
		required_missions = { spa_colonize_canaries }
		position = 2
		
		trigger = {
			navy_size_percentage = 0.9
			224 = {
				owned_by = ROOT
			}
		}
		
		effect = {
			add_dip_power = 50
			add_navy_tradition = 15
			add_country_modifier = {
				name = "naval_enthusiasm_mission"
				duration = 9125 #25 years
			}
		}
	}
	
	
	control_oran = {
		icon = mission_unite_home_region
		required_missions = { finish_reconqista }
		position = 3
		
		provinces_to_highlight = {
			province_id = 337
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			337 = {
				OR = {
					country_or_non_sovereign_subject_holds = ROOT
					custom_trigger_tooltip = {
						tooltip = control_prov.tooltip
						if = {
							limit = { 337 = { owner = { ai = yes } } }
							OR = {
								controlled_by = ROOT
								controller = { is_subject_of = ROOT NOT = { is_subject_of_type = tributary_state } }
							}
						}
					}
				} 
			}
		}
		
		effect = {
			every_province = {
				limit = {
					controller = { is_subject_of = ROOT }
					OR = {
						province_id = 337
					}
				}
				change_controller = ROOT
			}
			add_mil_power = 50
			337 = { 
				cede_province = ROOT 
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			} 
			2465 = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			oran_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			algiers_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_algiers = {
		icon = mission_cannons_firing
		required_missions = { control_oran }
		position = 4
		
		
		provinces_to_highlight = {
			OR = { 
				province_id = 2465
				area = oran_area
				area = algiers_area
				area = kabylia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			2465 = {
				country_or_non_sovereign_subject_holds = ROOT
			}
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_mil_power = 50
			hautes_plaines_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			tagmudant_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
			kabylia_area = {
				limit = { NOT = { country_or_non_sovereign_subject_holds = ROOT } } 
				add_permanent_claim = ROOT
			}
		}
	}
	
	spa_conquer_algeria = {
		icon = mission_empire
		required_missions = { spa_conquer_algiers }
		position = 5
		
		
		provinces_to_highlight = {
			OR = { 
				area = tagmudant_area
				area = oran_area
				area = algiers_area
				area = hautes_plaines_area
				area = kabylia_area
				area = ouled_nail_area
				area = constantine_area
				area = ouled_nail_area
				area = north_saharan_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			oran_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			algiers_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			kabylia_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			constantine_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			tagmudant_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			hautes_plaines_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			ouled_nail_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			north_saharan_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_stability = 1
			add_mil_power = 100
			338 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
			339 = {
				limit = { country_or_non_sovereign_subject_holds = ROOT }
				add_province_modifier = {
					name = "spa_settle"
					duration = -1
				}
			}
		}
	}
	

	
	spa_discover_florida = {
		icon = mission_establish_high_seas_navy
		required_missions = { spa_discover_puerto_rico }
		position = 6
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_florida
			}
		}
		
		trigger = { 
			colonial_florida = { type = all has_discovered = ROOT }
		}
	
		effect = {
			add_dip_power = 25
			hidden_effect = {
				927 = {
					change_religion = ROOT	
					change_culture = castillian
					add_territorial_core = ROOT	
				}
			}
			927 = { cede_province = ROOT }	
		}
	}
	
	spa_colonize_florida = {
		icon = mission_colonial
		required_missions = { spa_discover_florida }
		position = 7
		
		provinces_to_highlight = {
			OR = { 
				colonial_region = colonial_florida
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = { 
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				colonial_region = colonial_florida
			}	
		}
	
		effect = {
			hidden_effect = {
				colonial_florida = {
					limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { province_id = 2533 province_id = 923 province_id = 922 province_id = 2530 } }
					add_territorial_core = ROOT
				}
			}
			colonial_florida = {
				limit = { is_empty = yes NOT = { country_or_non_sovereign_subject_holds = ROOT } NOT = { province_id = 2533 province_id = 923 province_id = 922 province_id = 2530 } }
				cede_province = ROOT
			}
		}
	}
	
	spa_west_indies = {
		icon = mission_rb_colonise_spice_islands
		required_missions = { spa_colonize_cuba spa_colonize_florida spa_discover_yucatan }
		position = 8
		
		provinces_to_highlight = {
			OR = {
				region = carribeans_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			carribeans_region = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 25
			add_years_of_income = 5
			add_country_modifier = {
				name = "por_spice_trade"
				duration = 9125
			}
		}
	}
	
	spa_discover_spice_isles = {
		icon = mission_establish_high_seas_navy
		required_missions = {  }
		position = 13
		
		provinces_to_highlight = {
			OR = { 
				province_id = 633
				province_id = 649
				province_id = 650
				
			}
		}
		
		trigger = { 
			649 = { has_discovered = ROOT }
			650 = { has_discovered = ROOT }
			633 = { has_discovered = ROOT }
			has_idea_group = exploration_ideas
		}
	
		effect = {
			add_dip_power = 50 
			hidden_effect = {
				discover_province = 645 
				discover_province = 2696 
				discover_province = 2717 
				discover_province = 2725
				discover_province = 1401
				discover_province = 1409
			}
			if = { 
				limit = { TID = { exist = yes ai = yes } 650 = { owned_by = TID } }
				create_subject = { 
					subject_type = subject
					subject = TID
				}
				TID = { country_event = { id = orion_colonial.5 days = 0 } }
			}
					
			if = { 
				limit = { 2696 = { is_empty = yes } }
				hidden_effect = {
					2696 = {
						change_trade_goods = spices
						add_territorial_core = ROOT
					}
				}
				2696 = { 
					cede_province = ROOT 
					add_province_modifier = {
						name = "por_feitoria"
						duration = -1
					}
				}
			}
			if = { 
				limit = { 2696 = { is_city = yes  NOT = { country_or_non_sovereign_subject_holds = ROOT } } }
				if = {
					limit = { 
						2696 = { owner = { NOT = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } }
					}
					hidden_effect = {
						2696 = {
							province_event = { id = orion_seize.1 days = 0 } 
							change_trade_goods = spices
							add_territorial_core = ROOT	
						}	
					}
					2696 = { 
						cede_province = ROOT 
						add_province_modifier = {
							name = "por_feitoria"
							duration = -1
						}
					}
				}
				else_if = {
					limit = { 
						2696 = { owner = { OR = { technology_group = western technology_group = eastern technology_group = ottoman } } } 
					}
					2696 = { add_permanent_claim = ROOT }
				}
			}
			add_years_of_income = 2.5
		}
	}
	
	spa_circumnavigation = {
		icon = mission_establish_high_seas_navy
		required_missions = { }
		position = 16
		
		provinces_to_highlight = {
			OR = {
				area = west_micronesia_area
				area = polynesia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			west_micronesia_area = { type = all has_discovered = ROOT }
			polynesia_area = { type = all has_discovered = ROOT }
			has_idea_group = exploration_ideas	
		}
		
		effect = {
			add_country_modifier = {
				name = "circumnavigation"
				duration = 730
			}
			create_explorer = 80
		}
	}
	
	spa_colonize_hawaii = {
		icon = mission_colonial
		required_missions = { spa_circumnavigation }
		position = 17
		
		provinces_to_highlight = {
			OR = {
				province_id = 1240
				province_id = 5029 
				province_id = 5817 
				province_id = 5818 
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			1240 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5029 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5817 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
			5818 = { country_or_non_sovereign_subject_holds = ROOT is_city = yes }
		}
		
		effect = {
			1240 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			5029 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			5817 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			5818 = {
				add_province_modifier = {
					name = "por_plantation"
					duration = -1
				}
			}
			hidden_effect = {
				1240 = { change_trade_goods = coffee }
				5029 = { change_trade_goods = gems }
				5817 = { change_trade_goods = sugar }
				5818 = { change_trade_goods = tropical_wood }
			}
		}
	}
	
	spa_polynesia = {
		icon = mission_empire
		required_missions = { spa_colonize_hawaii spa_outpost_pacific }
		position = 18
		
		provinces_to_highlight = {
			OR = {
				region = oceanea_region
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		
		trigger = {
			oceanea_region = { 
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				is_city = yes
			}
		}
		
		effect = {
			add_prestige = 10
			add_years_of_income = 2
			add_country_modifier = {
				name = "sun_never_sets"
				duration = 36500
			}
		}
	}
	
}
